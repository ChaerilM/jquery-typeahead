@use 'sass:color';

/* Variables */

$typeahead-font-size: 1rem !default;
$typeahead-line-height: 1.25 !default;
$typeahead-font-family: lato, "Helvetica Neue", arial, helvetica, sans-serif !default;
$typeahead-primary-color: #66afe9 !default;
$typeahead-cancel-color: #d0021b !default;
$typeahead-radius: 2px !default;
$typeahead-shadow: false !default; // true / false
$typeahead-dropdown-spacing: 5px !default;
$typeahead-outline-color: $typeahead-primary-color !default;
$typeahead-loading-size: 1.35rem !default;
$typeahead-padding-y: 0.5rem !default;
$typeahead-padding-x: 0.75rem !default;
$typeahead-color: #555 !default;
$typeahead-border-color: #ccc !default;
$typeahead-group-color: color.adjust($typeahead-primary-color, $lightness: -30%) !default;
$typeahead-group-background: color.adjust($typeahead-primary-color, $lightness: 30%) !default;
$typeahead-group-border-color: color.adjust($typeahead-primary-color, $lightness: 20%) !default;
$typeahead-item-color: #333 !default;
$typeahead-item-background: #fff !default;
$typeahead-item-hover-background: #f5f5f5 !default;
$typeahead-item-disabled-color: #bababa !default;
$typeahead-item-disabled-background: #fafafa !default;
$typeahead-label-color: #3a99fc !default;
$typeahead-label-font-size: calc(#{$typeahead-font-size} * 0.875) !default;
$typeahead-label-border-color: #c2e0ff !default;
$typeahead-label-background: color.adjust($typeahead-primary-color, $lightness: 30%) !default;

// MIXINS --------------------------------------------------------------------------------------------------------------

@mixin typeahead-box-shadow {
    @if $typeahead-shadow {
        box-shadow: inset 0 1px 1px rgb(0 0 0 / 7.5%);
    }
}

@mixin typeahead-button-style {
    display: inline-block;
    margin-bottom: 0;
    text-align: center;
    touch-action: manipulation;
    cursor: pointer;
    background-color: #fff;
    border: 1px solid $typeahead-border-color;
    line-height: $typeahead-line-height;
    padding: $typeahead-padding-y $typeahead-padding-x;
    user-select: none;
    color: $typeahead-color;

    @include typeahead-box-shadow;

    &:hover,
    &:focus {
        color: color.adjust($typeahead-color, $lightness: -10%);
        background-color: $typeahead-item-hover-background;
        border-color: color.adjust($typeahead-border-color, $lightness: -10%);
    }

    &:active,
    &.active {
        background-image: none;

        @if $typeahead-shadow {
            box-shadow: inset 0 3px 5px rgb(0 0 0 / 12.5%);
        }
    }

    &:focus,
    &:active {
        border-color: $typeahead-outline-color;
    }
}

// FORM RESETS ---------------------------------------------------------------------------------------------------------

.typeahead{
    &__container {
        position: relative;
        display: inline-block;
        width: 100%;
        font-size: $typeahead-font-size;
        line-height: $typeahead-line-height;
        font-family: $typeahead-font-family;

        &__field {
            position: relative;
            display: flex;
            align-items: center;

            &__query,
            &__button {
                @include typeahead-button-style;
            }

            &__query {
                flex: 1;
                margin-right: $typeahead-dropdown-spacing;
            }

            &__button {
                flex-shrink: 0;
            }
        }

        &__result {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            z-index: 1000;
            display: none;
            float: left;
            min-width: 160px;
            padding: 5px 0;
            margin: 2px 0 0;
            font-size: 14px;
            text-align: left;
            list-style: none;
            background-color: #fff;
            border: 1px solid rgb(0 0 0 / 15%);
            border-radius: 4px;
            box-shadow: 0 6px 12px rgb(0 0 0 / 17.5%);

            &__item {
                display: block;
                padding: 3px 20px;
                clear: both;
                font-weight: normal;
                line-height: 1.4286;
                color: $typeahead-item-color;
                white-space: nowrap;
                background-color: $typeahead-item-background;
                border: 0;

                &:hover,
                &:focus {
                    color: $typeahead-item-color;
                    text-decoration: none;
                    background-color: $typeahead-item-hover-background;
                }

                &.active,
                &.active:hover,
                &.active:focus {
                    color: #fff;
                    text-decoration: none;
                    background-color: $typeahead-primary-color;
                    outline: 0;
                }

                &.disabled,
                &[aria-disabled="true"] {
                    color: $typeahead-item-disabled-color;
                    cursor: not-allowed;
                    background-color: $typeahead-item-disabled-background;
                }
            }

            &__group {
                padding: 3px 20px;
                font-weight: bold;
                line-height: 1.4286;
                color: $typeahead-group-color;
                background-color: $typeahead-group-background;
                border-top: 1px solid $typeahead-group-border-color;
            }

            &__cancel-button {
                color: $typeahead-cancel-color;
                cursor: pointer;
                background: none;
                border: none;
                padding: 0;
                font-size: 21px;
                font-weight: 700;
                line-height: 1;
                text-shadow: 0 1px 0 #fff;
                opacity: .2;

                &:hover,
                &:focus {
                    color: color.adjust($typeahead-cancel-color, $lightness: -10%);
                    text-decoration: none;
                    opacity: .5;
                }
            }

            &__loading {
                display: inline-block;
                width: $typeahead-loading-size;
                height: $typeahead-loading-size;
                vertical-align: middle;
                background-color: currentcolor;
                border-radius: 50%;
                opacity: .2;
                animation: spin 1s linear infinite;

                @keyframes spin {
                    0% { transform: rotate(0deg); }
                    100% { transform: rotate(360deg); }
                }
            }
        }

        button,
        input,
        optgroup,
        select,
        textarea {
            font: inherit;
            margin: 0;
        }

        optgroup {
            font-weight: bold;
        }

        button,
        input {
            overflow: visible;
        }

        button,
        select {
            text-transform: none;
        }

        button,
        html [type="button"],
        [type="reset"],
        [type="submit"] {
            appearance: button;
            font: inherit;
        }

        button::-moz-focus-inner,
        [type="button"]::-moz-focus-inner,
        [type="reset"]::-moz-focus-inner,
        [type="submit"]::-moz-focus-inner {
            border-style: none;
            padding: 0;
        }

        button:-moz-focusring,
        [type="button"]:-moz-focusring,
        [type="reset"]:-moz-focusring,
        [type="submit"]:-moz-focusring {
            outline: 1px dotted ButtonText;
        }

        fieldset {
            border: 1px solid #c0c0c0;
            margin: 0 2px;
            padding: 0.35em 0.625em 0.75em;
        }

        legend {
            box-sizing: border-box;
            color: inherit;
            display: table;
            max-width: 100%;
            padding: 0;
            white-space: normal;
        }

        textarea {
            overflow: auto;
        }

        [type="checkbox"],
        [type="radio"] {
            box-sizing: border-box;
            padding: 0;
        }

        [type="number"]::-webkit-inner-spin-button,
        [type="number"]::-webkit-outer-spin-button {
            height: auto;
        }

        ::placeholder {
            color: inherit;
            opacity: 0.54;
        }

    }
}
